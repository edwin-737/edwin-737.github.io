<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="buttonlist_v2.css" />
    <title>Read, Write, Update, Delete data firebase</title>
  </head>

  <script>
    function initCells() {
      for (let i = 0; i < 100; i++) {
        curButton = document.createElement("button");
        curButton.setAttribute("class", "cell1");
        let topV = 80 + 20 * Math.floor(i / 10);
        curButton.style.top = topV.toString() + "px";
        let leftV = 100 + 20 * (i % 10);
        curButton.style.left = leftV.toString() + "px";
        curButtonID = "c" + i.toString();
        curButton.setAttribute("id", curButtonID);
        document.body.appendChild(curButton);
      }
    }
  </script>
  <body onload="initCells();">
    <p>
      Hello visitor!
      <br />
      Feel free to change the colour of the light next to you.
    </p>
    <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
    <p>
      ->to change a colour, click one of the colours, and click on one of the
      white cells.
      <br />
      ->to turn the lights off, click reset.
    </p>
    <button id="reset" class="reset">reset</button>
    <button id="red1" class="red1"></button>
    <button id="red2" class="red2"></button>
    <button id="red3" class="red3"></button>
    <button id="red4" class="red4"></button>
    <button id="red5" class="red5"></button>
    <button id="red6" class="red6"></button>
    <button id="orange1" class="orange1"></button>
    <button id="orange2" class="orange2"></button>
    <button id="orange3" class="orange3"></button>
    <button id="orange4" class="orange4"></button>
    <button id="orange5" class="orange5"></button>
    <button id="orange6" class="orange6"></button>
    <!--imports/configuration-->
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyCEG_f6fzSnbx3gUDlqeJa_bwK-e4DzmrM",
        authDomain: "dti-3007.firebaseapp.com",
        databaseURL:
          "https://dti-3007-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "dti-3007",
        storageBucket: "dti-3007.appspot.com",
        messagingSenderId: "397662113789",
        appId: "1:397662113789:web:b5b10ceec5bf6146fbd394",
        measurementId: "G-3RY97GMB2Z",
      };
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      import {
        getDatabase,
        ref,
        set,
        child,
        update,
        remove,
      } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";
      const db = getDatabase();
      let activeColour = [102, 178, 255];
      let final = [[0, 0, 0]];
      for (let i = 0; i < 99; i++) {
        final.push([0, 0, 0]);
      }
      var r1 = document.getElementById("red1"),
        r2 = document.getElementById("red2"),
        r3 = document.getElementById("red3"),
        r4 = document.getElementById("red4"),
        r5 = document.getElementById("red5"),
        r6 = document.getElementById("red6"),
        o1 = document.getElementById("orange1"),
        o2 = document.getElementById("orange2"),
        o3 = document.getElementById("orange3"),
        o4 = document.getElementById("orange4"),
        o5 = document.getElementById("orange5"),
        o6 = document.getElementById("orange6"),
        reset = document.getElementById("reset");

      function chooseColour(colour) {
        if (colour == r1) {
          activeColour = [102, 0, 0];
        } else if (colour == r2) {
          activeColour = [153, 0, 0];
        } else if (colour == r3) {
          activeColour = [204, 0, 0];
        } else if (colour == r4) {
          activeColour = [255, 0, 0];
        } else if (colour == r5) {
          activeColour = [255, 51, 51];
        } else if (colour == r6) {
          activeColour = [255, 102, 102];
        } else if (colour == o1) {
          activeColour = [51, 25, 0];
        } else if (colour == o2) {
          activeColour = [102, 51, 0];
        } else if (colour == o3) {
          activeColour = [153, 76, 0];
        } else if (colour == o4) {
          activeColour = [204, 102, 0];
        } else if (colour == o5) {
          activeColour = [255, 128, 0];
        } else if (colour == o6) {
          activeColour = [255, 153, 51];
        }
      }
      function Init() {
        for (let i = 0; i < 100; i++) {
          let chosenKey = i.toString();
          update(ref(db), {
            [chosenKey]: final[i],
          });
        }
      }
      function applyToCells(cell) {
        let chosenKey = cell.toString();
        update(ref(db), {
          [chosenKey]: final[cell],
        });
      }
      function whichCellClicked() {
        for (let i = 0; i < 100; i++) {
          let cur_id = "c" + i.toString();
          let cur_button = document.getElementById(cur_id);
          cur_button.onclick = function () {
            final[i] = activeColour;
            applyToCells(i);
          };
        }
      }
      r1.onclick = function () {
        chooseColour(r1);
      };
      r2.onclick = function () {
        chooseColour(r2);
      };
      r3.onclick = function () {
        chooseColour(r3);
      };
      r4.onclick = function () {
        chooseColour(r4);
      };
      r5.onclick = function () {
        chooseColour(r5);
      };
      r6.onclick = function () {
        chooseColour(r6);
      };
      o1.onclick = function () {
        chooseColour(o1);
      };
      o2.onclick = function () {
        chooseColour(o2);
      };
      o3.onclick = function () {
        chooseColour(o3);
      };
      o4.onclick = function () {
        chooseColour(o4);
      };
      o5.onclick = function () {
        chooseColour(o5);
      };
      o6.onclick = function () {
        chooseColour(o6);
      };
      reset.onclick = function () {
        Init();
        whichCellClicked();
      };
    </script>
  </body>
</html>
